#!/usr/bin/zsh
# -*- mode: shell-script; fill-column: 75; comment-column: 50; -*-

# Build
export AR=ar
export TZ='America/Los_Angeles'

# Language
if [[ -z "$LANG" ]]; then
    export LANG='en_US.utf8'
fi
export LC_CTYPE=$LANG

# 10 years I've been listenining to this list prompt and today I am fucking done!
export LISTPROMPT=''

# XDG vars
export XDG_CACHE_HOME=${XDG_CACHE_HOME:="$HOME/.cache/"}
export XDG_CONFIG_HOME=${XDG_CONFIG_HOME:="$HOME/.config/"}

# Don't automatically rename my windows in screen/tmux
export DISABLE_AUTO_TITLE="true"

export EDITOR='vim'

# Environment
export GREP_COLORS="37;45"

# Paths
path=(
    /usr/local/bin
    /usr/local/sbin
    $path
    $HOME/.local/bin
    /usr/local/cuda/bin
)

export LD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}

# Load our completion functions
fpath=(
    $HOME/.zsh/completion
    $HOME/.zsh/zsh-completions/src
    $HOME/.zsh/functions
    $fpath
)

# Ensure path arrays do not contain duplicates.
typeset -gU fpath mailpath path cdpath

# Temporary Files
if [[ ! -d "$TMPDIR" ]]; then
    export TMPDIR="/tmp/$LOGNAME"
    # Disable complaining about `-m` & `-p` used in tandem
    # shellcheck disable=SC2174
    mkdir -m 700 -p "$TMPDIR"
fi
export TMPPREFIX="${TMPDIR%/}/zsh"

# Font Config
if [[ "$OSTYPE" == linux-gnu ]]; then
    export FONTCONFIG_PATH=${FONTCONFIG_PATH:=/etc/fonts}
fi

# virtualenvwrapper
export WORKON_HOME=~/.local/environments

# rg
export RIPGREP_CONFIG_PATH=~/.ripgreprc

if (( $+commands[rustc] )); then
    export RUST_SRC_PATH="$(rustc --print sysroot)/lib/rustlib/src/rust/src"
fi

# Java
export _JAVA_OPTIONS="-Dawt.useSystemAAFontSettings=on"

# Expanded `time' output
export TIMEFMT='%J %U user %S system %P cpu %*E total | %F mfault | %I/%O i/o | %Mk maxm | %w/%c ctx | %r %s'

if (( $+commands[dircolors] )) && test -r ~/.dir_colors; then
    eval `dircolors -b ~/.dir_colors`
fi

# ── Utility Control Variables ──────────────────────────────
# Set the default Less options.
# Mouse-wheel scrolling has been disabled by -X (disable screen clearing).
# Remove -X and -F (exit if the content fits on one screen) to enable it.
#   export LESS='-F -g -i -M -R -S -w -X -z-4'
#   export PAGER='less'
#   export SYSTEMD_PAGER='less'

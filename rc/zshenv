#!/usr/bin/zsh
# -*- mode: shell-script; sh-shell: zsh; fill-column: 75; comment-column: 50; coding: utf-8 -*-

# Locale
export TZ=${TZ:=America/Los_Angeles}
export LANG=${LANG:=en_US.UTF8}
export LC_CTYPE="$LANG"

# Use default prompt when paging through completion lists
export LISTPROMPT=''

# XDG vars
export XDG_CACHE_HOME=${XDG_CACHE_HOME:=~/.cache}
export XDG_CONFIG_HOME=${XDG_CONFIG_HOME:=~/.config}

# Don't automatically rename my windows in screen/tmux
export DISABLE_AUTO_TITLE=true

# Paths
path=(
    /usr/local/bin
    /usr/local/sbin
    $path
    "$HOME/.local/bin"
)

# Load our completion functions
fpath=(
    "$HOME/.zsh/completion"
    "$HOME/.zsh/zsh-completions/src"
    "$HOME/.zsh/functions"
    $fpath
)

# Ensure path arrays do not contain duplicates.
typeset -gU fpath mailpath path cdpath

# Temporary Files
if [[ ! -d "$TMPDIR" ]]; then
    export TMPDIR="/tmp/${LOGNAME}"
    mkdir -m 700 "$TMPDIR"
fi
export TMPPREFIX="${TMPDIR%/}/zsh"

# Font Config
if [[ "$OSTYPE" == linux-gnu ]]; then
    export FONTCONFIG_PATH=${FONTCONFIG_PATH:=/etc/fonts}
fi

# Configure LS_COLORS
if (( $+commands[dircolors] )); then
    if [[ -r ~/.dir_colors ]]; then
        eval "$(dircolors -b ~/.dir_colors)"
    else
        eval "$(dircolors -b)"
    fi
fi

if (( $+commands[vim] )); then
    export EDITOR="$commands[vim]"

    if (( $+commands[gvim] )); then
        export VISUAL="$commands[gvim]"
    else
        export VISUAL="$commands[vim]"
    fi
fi

if (( $+commands[less] )); then
    export PAGER="$commands[less]"
fi

if (( $+commands[rustc] )); then
    export RUST_SRC_PATH="$(rustc --print sysroot)/lib/rustlib/src/rust/src"
fi

# virtualenvwrapper
export WORKON_HOME="$HOME/.local/environments"

# Java
export _JAVA_OPTIONS="-Dawt.useSystemAAFontSettings=on"

